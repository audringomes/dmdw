hmLoadTopic({
hmKeywords:"",
hmTitle:"API",
hmDescription:"DMDW Writer The API for the sw:dm_xml_writer is as shown below:   DMDW Transformer The class sw:dm_xml_transformer offers a way to perform the translation from XML to HTML usi",
hmPrevLink:"dmdw_smallworld.html",
hmNextLink:"dmdw_modules.html",
hmParentLink:"dmdw_smallworld.html",
hmBreadCrumbs:"<a href=\"dmdw_smallworld.html\">Magik<\/a>",
hmTitlePath:"Magik > API",
hmHeader:"",
hmBody:"<h1 class=\"p_Heading1\"><span class=\"f_Heading1\">DMDW&nbsp;Writer<\/span><\/h1>\n\r<p class=\"p_Normal\">The API for the <span style=\"font-weight: bold;\">sw:dm_xml_writer<\/span> is as shown below:<\/p>\n\r<div class=\"magik\">\n\r    <pre>\n\r <span class=\"comment\">*** The 2 basic or advanced or debug methods defined on the class, `dm_xml_writer\'.<\/span>\n\r\n\r<span class=\"function-name\">new()<\/span>  IN  <span class=\"type\">sw:dm_xml_writer<\/span>    B\n\r<span class=\"variable-name\"> ds properties<\/span>\n\r\n\r        <span class=\"comment\">## \n\r<\/span>        <span class=\"comment\">## DS - The databse view to be reported\n\r<\/span>        <span class=\"comment\">## PROPERTIES - A property_list with the following keys\n\r<\/span>        <span class=\"comment\">## :ace_name   - name of ACE to be used for categories and order of\n\r<\/span>        <span class=\"comment\">## collections\n\r<\/span>        <span class=\"comment\">## :output_file\n\r<\/span>        <span class=\"comment\">## \n\r<\/span>        <span class=\"comment\">## The following properties are optional:\n\r<\/span>        <span class=\"comment\">## :update_file - file pathname of xml with updates\n\r<\/span>        <span class=\"comment\">## :dm_product_name  - name of sw_product for datamodel version\n\r<\/span>        <span class=\"comment\">## :dm_module_name - name of sw_module for datamodel version\n\r<\/span>        <span class=\"comment\">## :dm_predicate - a predicate\n\r<\/span>        <span class=\"comment\">## :dataset_specials (a class as dm_dataset_specials)\n\r<\/span>        <span class=\"comment\">## :products_for_version - collection of product names for which\n\r<\/span>        <span class=\"comment\">## a version should be written.\n\r<\/span>        <span class=\"comment\">## \n\r<\/span>        <span class=\"comment\">## On instantiation it will gather data.\n\r<\/span>        <span class=\"comment\">## \n\r<\/span><span class=\"function-name\">\n\r<\/span>\n\r<span class=\"function-name\">process()<\/span>  IN  <span class=\"type\">sw:dm_xml_writer<\/span>    B\n\r<span class=\"function-name\">\n\r<\/span>\n\r        <span class=\"comment\">## \n\r<\/span>        <span class=\"comment\">## Writes all xml elements to .out_file in the following order:\n\r<\/span>        <span class=\"comment\">## \n\r<\/span>        <span class=\"comment\">## 0. Datamodel and software details\n\r<\/span>        <span class=\"comment\">## 1. Categories &amp; collections\n\r<\/span>        <span class=\"comment\">## 2. Enumerators\n\r<\/span>        <span class=\"comment\">## 3. Topology\n\r<\/span>        <span class=\"comment\">## \n\r<\/span><span class=\"function-name\">\n\r\n\r<\/span><\/pre>\n\r<\/div><p class=\"p_Normal\">&nbsp;<\/p>\n\r<h1 class=\"p_Heading1\"><span class=\"f_Heading1\">DMDW&nbsp;Transformer<\/span><\/h1>\n\r<p class=\"p_Normal\">The class <span style=\"font-weight: bold;\">sw:dm_xml_transformer<\/span> offers a way to perform the translation from XML to HTML using XSLT. Run by <span style=\"font-weight: bold;\">transform_to_html()<\/span><\/p>\n\r<p class=\"p_Normal\">The class acts as singleton. No instantiation necessary.<\/p>\n\r<div class=\"magik\">\n\r    <pre>\n\r<span class=\"function-name\">transform_to_html()<\/span>  IN  <span class=\"type\">sw:dm_xml_transformer<\/span>    B\n\r <span class=\"variable-name\">p_module_name p_input_file <\/span><span class=\"cb-font-lock-optional\">OPT p_output_dir p_stylesheet p_copy_html_resources? p_copy_help?<\/span>\n\r\n\r        <span class=\"comment\">## \n\r<\/span>        <span class=\"comment\">## Do a XSLT transform on xml file P_INPUT_FILE in module\n\r<\/span>        <span class=\"comment\">## P_MODULE_NAME using the XLST file P_STYLESHEET.\n\r<\/span>        <span class=\"comment\">## \n\r<\/span>        <span class=\"comment\">## P_INPUT_FILE should be in base\/data resource of P_MODULE_NAME.\n\r<\/span>        <span class=\"comment\">## P_OUTPUT_DIR defaults to the base\/html_output resource\n\r<\/span>        <span class=\"comment\">## folder of module P_MODULE_NAME or, when this\n\r<\/span>        <span class=\"comment\">## does not exist, the directory of P_INPUT_FILE.\n\r<\/span>        <span class=\"comment\">## \n\r<\/span>        <span class=\"comment\">## P_STYLESHEET is the name of the xsl stylesheet to use. This\n\r<\/span>        <span class=\"comment\">## defaults to FileSet2.xsl in the data\/xsl of the module\n\r<\/span>        <span class=\"comment\">## :ds_doc_writer.\n\r<\/span>        <span class=\"comment\">## If P_STYLESHEET is an absolute path, that file will be used.\n\r<\/span>        <span class=\"comment\">## \n\r<\/span>        <span class=\"comment\">## P_COPY_HTML_RESOURCES? If true (default is _true) it will\n\r<\/span>        <span class=\"comment\">## copy the resources in the data\/html folder of\n\r<\/span>        <span class=\"comment\">## ds_doc_writer into P_OUTPUT_DIR\n\r<\/span>        <span class=\"comment\">## \n\r<\/span>        <span class=\"comment\">## P_COPY_HELP? If true (default is _true) it copies the help\n\r<\/span>        <span class=\"comment\">## resources of the module into P_OUTPUT_DIR\n\r<\/span>        <span class=\"comment\">## \n\r<\/span>        <span class=\"comment\">## The method returns the full outputpath of the html.\n\r<\/span>        <span class=\"comment\">## \n\r<\/span><span class=\"function-name\">\n\r\n\r<\/span><\/pre>\n\r<\/div><p class=\"p_Normal\">&nbsp;<\/p>\n\r<h1 class=\"p_Heading1\"><span class=\"f_Heading1\">DMDW&nbsp;SVG&nbsp;writer<\/span><\/h1>\n\r<p class=\"p_Normal\">The class <span style=\"font-weight: bold;\">sw:dm_svg_writer <\/span>is for creation of a diagram using the graphics in the appropriate case database (alternative). The <span style=\"font-weight: bold;\">sw:dm_svg_writer<\/span> must be instantiated. The actual diagram can be created with the method <span style=\"font-weight: bold;\">create_svg_for()<\/span>. See the proc <span style=\"font-weight: bold;\">dm_create_svg() <\/span>for an example.<\/p>\n\r<p class=\"p_Normal\"><div class=\"magik\">\n\r<pre>\n\r<span class=\"magik-font-lock-keyword-statements\"><span class=\"region\">_pragma<\/span><\/span><span class=\"magik-font-lock-pragma\"><span class=\"region\">(classify_level=basic, topic={dmdw,dm_svg_writer})<\/span><\/span><span class=\"region\">\n\r<\/span><span class=\"doc\"><span class=\"region\">##<\/span><\/span><span class=\"comment\"><span class=\"region\">\n\r<\/span><\/span><span class=\"doc\"><span class=\"region\">## Create a svg image from case database graphics in<\/span><\/span><span class=\"comment\"><span class=\"region\">\n\r<\/span><\/span><span class=\"doc\"><span class=\"region\">## CASE_VIEW. Fetch only the non internal objects from<\/span><\/span><span class=\"comment\"><span class=\"region\">\n\r<\/span><\/span><span class=\"doc\"><span class=\"region\">## dataset DS and write the svg file to OUTPUT_FILE<\/span><\/span><span class=\"comment\"><span class=\"region\">\n\r<\/span><\/span><span class=\"doc\"><span class=\"region\">## The location defaults to xml resource<\/span><\/span><span class=\"comment\"><span class=\"region\">\n\r<\/span><\/span><span class=\"doc\"><span class=\"region\">## f<\/span><\/span><span class=\"comment\"><span class=\"region\">older of this module and the name of the DS.\n\r<\/span><\/span><span class=\"doc\"><span class=\"region\">##<\/span><\/span><span class=\"comment\"><span class=\"region\">\n\r<\/span><\/span><span class=\"doc\"><span class=\"region\">## We use the default properties as specified in<\/span><\/span><span class=\"comment\"><span class=\"region\">\n\r<\/span><\/span><span class=\"doc\"><span class=\"region\">## dm_svg_writer.default_properties, except form the option<\/span><\/span><span class=\"comment\"><span class=\"region\">\n\r<\/span><\/span><span class=\"doc\"><span class=\"region\">## <\/span><\/span><span class=\"magik-font-lock-boolean\"><span class=\"region\">:write_style_element?<\/span><\/span><span class=\"doc\"><span class=\"region\"> <\/span><\/span><span class=\"comment\"><span class=\"region\">\n\r<\/span><\/span><span class=\"doc\"><span class=\"region\">##<\/span><\/span><span class=\"comment\"><span class=\"region\">\n\r<\/span><\/span><span class=\"doc\"><span class=\"region\">## Note that when you see a black square, it most likely<\/span><\/span><span class=\"comment\"><span class=\"region\">\n\r<\/span><\/span><span class=\"doc\"><span class=\"region\">## is missing the CSS style sheet.<\/span><\/span><span class=\"comment\"><span class=\"region\">\n\r<\/span><\/span><span class=\"doc\"><span class=\"region\">##<\/span><\/span><span class=\"comment\"><span class=\"region\">\n\r<\/span><\/span><span class=\"magik-font-lock-keyword-variable\"><span class=\"region\">_global<\/span><\/span><span class=\"region\"> dm_create_svg &lt;&lt;\n\r<\/span><span class=\"magik-font-lock-procedure\"><span class=\"region\">_proc<\/span><\/span><span class=\"region\"> <\/span><span class=\"constant\"><span class=\"region\">@dm_create_svg<\/span><\/span><span class=\"region\">( ds, case_view, <\/span><span class=\"magik-font-lock-keyword-arguments\"><span class=\"region\">_optional<\/span><\/span><span class=\"region\"> output_file )\n\r\n\r        <\/span><span class=\"magik-font-lock-keyword-statements\"><span class=\"region\">_if<\/span><\/span><span class=\"region\"> output_file <\/span><span class=\"magik-font-lock-keyword-operators\"><span class=\"region\">_is<\/span><\/span><span class=\"region\"> <\/span><span class=\"constant\"><span class=\"region\">_unset<\/span><\/span><span class=\"region\"> \n\r        <\/span><span class=\"magik-font-lock-keyword-statements\"><span class=\"region\">_then<\/span><\/span><span class=\"region\">\n\r                l_mod &lt;&lt; sw_module_manager.<\/span><span class=\"function-name\"><span class=\"region\">module<\/span><\/span><span class=\"region\">(<\/span><span class=\"magik-font-lock-symbol\"><span class=\"region\">:ds_svg_writer<\/span><\/span><span class=\"region\">)\n\r                l_dir &lt;&lt; l_mod.<\/span><span class=\"function-name\"><span class=\"region\">resource_list_for<\/span><\/span><span class=\"region\">(<\/span><span class=\"magik-font-lock-symbol\"><span class=\"region\">:xm<\/span><\/span><span class=\"region\">l).<\/span><span class=\"magik-font-lock-procedure\"><span class=\"region\">an_element<\/span><\/span><span class=\"region\">()\n\r                output_file &lt;&lt; system.<\/span><span class=\"function-name\"><span class=\"region\">pathname_from_components<\/span><\/span><span class=\"region\">( <\/span><span class=\"magik-font-lock-procedure\"><span class=\"region\">write_string<\/span><\/span><span class=\"region\">(ds.name,<\/span><span class=\"string\"><span class=\"region\">\".svg\"<\/span><\/span><span class=\"region\">),l_dir)\n\r        <\/span><span class=\"magik-font-lock-keyword-statements\"><span class=\"region\">_endif<\/span><\/span><span class=\"region\">\n\r\n\r        <\/span><span class=\"magik-font-lock-keyword-variable\"><span class=\"region\">_local<\/span><\/span><span class=\"region\"> l_props &lt;&lt; property_list.<\/span><span class=\"function-name\"><span class=\"region\">new_with<\/span><\/span><span class=\"region\">(<\/span><span class=\"magik-font-lock-boolean\"><span class=\"region\">:write_style_element?<\/span><\/span><span class=\"region\">,<\/span><span class=\"constant\"><span class=\"region\">_true<\/span><\/span><span class=\"region\">)\n\r        <\/span><span class=\"magik-font-lock-keyword-variable\"><span class=\"region\">_local<\/span><\/span><span class=\"region\"> l_writer &lt;&lt; dm_svg_writer.<\/span><span class=\"function-name\"><span class=\"region\">new<\/span><\/span><span class=\"region\">( case_view, l_props )\n\r        <\/span><span class=\"magik-font-lock-keyword-variable\"><span class=\"region\">_local<\/span><\/span><span class=\"region\"> l_collections &lt;&lt; rope.<\/span><span class=\"function-name\"><span class=\"region\">new_from_iter<\/span><\/span><span class=\"region\">(ds,<\/span><span class=\"magik-font-lock-symbol\"><span class=\"region\">:|user_tables()|<\/span><\/span><span class=\"region\">)\n\r\n\r        l_writer.<\/span><span class=\"function-name\"><span class=\"region\">create_svg_for<\/span><\/span><span class=\"region\">( l_collections, output_file )\n\r        \n\r        system.<\/span><span class=\"function-name\"><span class=\"region\">do_command<\/span><\/span><span class=\"region\">( <\/span><span class=\"magik-font-lock-procedure\"><span class=\"region\">write_string<\/span><\/span><span class=\"region\">(<\/span><span class=\"string\"><span class=\"region\">\"swdocopen.exe \"<\/span><\/span><span class=\"region\">, output_file ))\n\r        \n\r<\/span><span class=\"magik-font-lock-procedure\"><span class=\"region\">_endproc<\/span><\/span><span class=\"region\">\n\r\$<\/span><\/pre>\n\r<\/magik><\/p>\n\r<p class=\"p_Normal\">&nbsp;<\/p>\n\r<h1 class=\"p_Heading1\"><span class=\"f_Heading1\">Procs<\/span><\/h1>\n\r<p class=\"p_Normal\">The following procs are available:<\/p>\n\r<div class=\"magik\">\n\r    <pre>\n\r\n\r<span class=\"magik-font-lock-keyword-statements\">_pragma<\/span><span class=\"magik-font-lock-pragma\">(classify_level=basic, topic={wd_doc_writer})<\/span>\n\r<span class=\"doc\">##<\/span><span class=\"comment\">\n\r<\/span><span class=\"doc\">## Creates a default module structure and adds the following<\/span><span class=\"comment\">\n\r<\/span><span class=\"doc\">## structure to it:<\/span><span class=\"comment\">\n\r<\/span><span class=\"doc\">##<\/span><span class=\"comment\">\n\r<\/span><span class=\"doc\">##   base\/data<\/span><span class=\"comment\">\n\r<\/span><span class=\"doc\">##   base\/xml<\/span><span class=\"comment\">\n\r<\/span><span class=\"doc\">##   base\/html<\/span><span class=\"comment\">\n\r<\/span><span class=\"doc\">##   base\/html_output<\/span><span class=\"comment\">\n\r<\/span><span class=\"doc\">##   base\/xsl<\/span><span class=\"comment\">\n\r<\/span><span class=\"doc\">##   en_gb\/messages<\/span><span class=\"comment\">\n\r<\/span><span class=\"doc\">##   en_gb\/help<\/span><span class=\"comment\">\n\r<\/span><span class=\"doc\">##<\/span><span class=\"comment\">\n\r<\/span><span class=\"magik-font-lock-keyword-variable\">_global<\/span> create_dmdw_module &lt;&lt;\n\r<span class=\"magik-font-lock-procedure\">_proc<\/span> <span class=\"constant\">@create_module<\/span>(p_parent_dir,p_module_name, <span class=\"magik-font-lock-keyword-arguments\">_gather<\/span> p_args)\n\r        \n\r        <span class=\"magik-font-lock-keyword-variable\">_local<\/span> l_args &lt;&lt; property_list.<span class=\"function-name\">new_from_gathered<\/span>(p_args)\n\r        l_args[<span class=\"magik-font-lock-symbol\">:resources<\/span>] &lt;&lt; property_list.<span class=\"function-name\">new_with<\/span>(<span class=\"magik-font-lock-symbol\">:base<\/span>,{<span class=\"magik-font-lock-symbol\">:data<\/span>,<span class=\"magik-font-lock-symbol\">:xml<\/span>,<span class=\"magik-font-lock-symbol\">:html<\/span>,<span class=\"magik-font-lock-symbol\">:html_output<\/span>,<span class=\"magik-font-lock-symbol\">:xsl<\/span>},\n\r                                                     <span class=\"magik-font-lock-symbol\">:en_gb<\/span>,{<span class=\"magik-font-lock-symbol\">:messages<\/span>,<span class=\"magik-font-lock-symbol\">:help<\/span>})\n\r        <span class=\"magik-font-lock-keyword-variable\">_local<\/span> l_mod &lt;&lt; sw_module_manager.<span class=\"function-name\">build_module<\/span>(p_parent_dir,p_module_name,<span class=\"magik-font-lock-keyword-arguments\">_scatter<\/span> l_args)\n\r        <span class=\"magik-font-lock-keyword-variable\">_local<\/span> l_mdir &lt;&lt; system.<span class=\"function-name\">pathname_down<\/span>(p_parent_dir,p_module_name)\n\r        <span class=\"magik-font-lock-write\">write<\/span>(<span class=\"string\">\"Module \"<\/span>,l_mdir,<span class=\"string\">\" created. Don\'t forget to set requirement ds_doc_writer\"<\/span>)\n\r        &gt;&gt; <span class=\"constant\">_true<\/span> \n\r<span class=\"magik-font-lock-procedure\">_endproc<\/span>\n\r\$\n\r\n\r<span class=\"magik-font-lock-keyword-statements\">_pragma<\/span><span class=\"magik-font-lock-pragma\">(classify_level=basic, topic={wd_doc_writer})<\/span>\n\r<span class=\"doc\">##<\/span><span class=\"comment\">\n\r<\/span><span class=\"doc\">## Do a xslt translation of the dmdw xml file P_INPUT_FILE<\/span><span class=\"comment\">\n\r<\/span><span class=\"doc\">## in the xml resource folder of P_MODULE_NAME<\/span><span class=\"comment\">\n\r<\/span><span class=\"doc\">##<\/span><span class=\"comment\">\n\r<\/span><span class=\"doc\">## See dm_xml_transformer.transform_to_html() for further<\/span><span class=\"comment\">\n\r<\/span><span class=\"doc\">## information on the arguments<\/span><span class=\"comment\">\n\r<\/span><span class=\"doc\">##<\/span><span class=\"comment\">\n\r<\/span><span class=\"magik-font-lock-keyword-variable\">_global<\/span> transform_to_html &lt;&lt;\n\r<span class=\"magik-font-lock-procedure\">_proc<\/span> <span class=\"constant\">@transform_to_fileset_html<\/span>(p_module_name, p_input_file, <span class=\"magik-font-lock-keyword-arguments\">_optional<\/span>\n\r                                 p_outdir, p_stylesheet, <span class=\"magik-font-lock-boolean\">p_copy_html_resources?<\/span>, <span class=\"magik-font-lock-boolean\">p_copy_help?<\/span>)\n\r        \n\r        &gt;&gt; dm_xml_transformer.<span class=\"function-name\">transform_to_html<\/span>(\n\r                   p_module_name,\n\r                   p_input_file,\n\r                   p_outdir,\n\r                   p_stylesheet,\n\r                   <span class=\"magik-font-lock-boolean\">p_copy_html_resources?<\/span>,\n\r                   <span class=\"magik-font-lock-boolean\">p_copy_help?<\/span>\n\r                              )\n\r\n\r<span class=\"magik-font-lock-procedure\">_endproc<\/span>\n\r\$\n\r<\/pre>\n\r<\/div><p class=\"p_Normal\">&nbsp;<\/p>\n\r"
})
